# 离线打包 - 快速开始

## 🚀 一分钟上手

### 1. 创建打包

```cmd
# 运行打包脚本
scripts\deployment\离线打包.bat
```

**自动完成**：
- ✅ 获取版本号（从 Git 标签）
- ✅ 生成时间戳
- ✅ 创建版本目录 `releases/offline_deploy_{版本}_{时间}`
- ✅ 打包所有文件

**输出示例**：
```
releases/offline_deploy_1.0.0_20251118_143052/
```

### 2. 管理版本

```cmd
# 运行版本管理工具
scripts\deployment\管理打包版本.bat
```

**功能菜单**：
```
[1] 列出所有版本
[2] 查看版本详情
[3] 删除指定版本
[4] 清理旧版本（保留最近N个）
[5] 压缩指定版本
[6] 计算目录大小
```

### 3. 部署版本

```cmd
# 1. 进入版本目录
cd releases\offline_deploy_1.0.0_20251118_143052

# 2. 复制到目标服务器

# 3. 运行部署
完整部署.bat
```

## 📋 常用操作

### 查看所有版本

```cmd
管理打包版本.bat
选择 [1] 列出所有版本
```

### 清理旧版本

```cmd
管理打包版本.bat
选择 [4] 清理旧版本
输入保留数量: 5
确认: YES
```

### 压缩版本

```cmd
管理打包版本.bat
选择 [5] 压缩指定版本
输入版本名称: offline_deploy_1.0.0_20251118_143052
```

## 💡 版本号管理

### 使用 Git 标签

```bash
# 1. 创建标签
git tag -a v1.0.0 -m "Release 1.0.0"

# 2. 推送标签
git push origin v1.0.0

# 3. 打包（会自动使用 v1.0.0）
scripts\deployment\离线打包.bat
```

### 无标签时

- 默认使用 `v1.0.0`
- 建议创建 Git 标签管理版本

## 📁 目录结构

```
项目根目录/
├── releases/                                    # 所有版本
│   ├── offline_deploy_1.0.0_20251118_143052/  # 版本1
│   ├── offline_deploy_1.0.1_20251118_150230/  # 版本2
│   └── offline_deploy_1.1.0_20251119_091500/  # 版本3
└── scripts/
    └── deployment/
        ├── 离线打包.bat
        ├── 管理打包版本.bat
        ├── 快速开始.md (本文件)
        ├── README-离线打包.md
        └── 版本管理说明.md
```

## ⚠️ 注意事项

1. **磁盘空间**
   - 每个版本约 200-500 MB
   - 定期清理旧版本

2. **版本保留**
   - 开发环境：保留 3-5 个版本
   - 生产环境：保留当前 + 上一个稳定版

3. **Git 配置**
   - `releases/` 已添加到 .gitignore
   - 不会提交到版本库

## 🔗 相关文档

- [详细说明](README-离线打包.md)
- [版本管理](版本管理说明.md)

---

**提示**: 第一次使用建议先阅读 [版本管理说明.md](版本管理说明.md)
