# è®¾å¤‡ç›‘æ§ç³»ç»Ÿ - ç§»åŠ¨ç«¯

## ğŸ“± é¡¹ç›®æ¦‚è¿°

åŸºäº NativeScript-Vue 3 çš„è·¨å¹³å°ç§»åŠ¨åº”ç”¨ï¼Œæ”¯æŒ Android å’Œ iOSã€‚

## ğŸ¯ å·²å®ç°åŠŸèƒ½

### æ ¸å¿ƒåŠŸèƒ½

1. **ç”¨æˆ·è®¤è¯**
   - âœ… ç™»å½•/ç™»å‡º
   - âœ… è®°ä½å¯†ç 
   - âœ… Token ç®¡ç†
   - âœ… è‡ªåŠ¨ç™»å½•

2. **è®¾å¤‡ç®¡ç†**
   - âœ… è®¾å¤‡åˆ—è¡¨
   - âœ… è®¾å¤‡æœç´¢
   - âœ… è®¾å¤‡è¯¦æƒ…
   - âœ… çŠ¶æ€ç›‘æ§

3. **å‘Šè­¦ç®¡ç†**
   - âœ… å‘Šè­¦åˆ—è¡¨
   - âœ… çº§åˆ«è¿‡æ»¤
   - âœ… å‘Šè­¦è¯¦æƒ…
   - âœ… çŠ¶æ€æ ‡è¯†

4. **ç»´ä¿®ç®¡ç†**
   - âœ… ç»´ä¿®è®°å½•
   - âœ… çŠ¶æ€è¿‡æ»¤
   - âœ… è¿›åº¦æ˜¾ç¤º
   - âœ… å·¥å•è¯¦æƒ…

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
mobile/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ pages/              # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ LoginPage.vue          # ç™»å½•é¡µ
â”‚   â”‚   â”œâ”€â”€ HomePage.vue           # å·¥ä½œå°
â”‚   â”‚   â”œâ”€â”€ DeviceListPage.vue     # è®¾å¤‡åˆ—è¡¨
â”‚   â”‚   â”œâ”€â”€ DeviceDetailPage.vue   # è®¾å¤‡è¯¦æƒ…
â”‚   â”‚   â”œâ”€â”€ AlarmListPage.vue      # å‘Šè­¦åˆ—è¡¨
â”‚   â”‚   â””â”€â”€ RepairListPage.vue     # ç»´ä¿®è®°å½•
â”‚   â”œâ”€â”€ services/           # æœåŠ¡å±‚
â”‚   â”‚   â””â”€â”€ apiService.ts          # API æœåŠ¡
â”‚   â”œâ”€â”€ stores/             # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â””â”€â”€ authStore.ts           # è®¤è¯çŠ¶æ€
â”‚   â”œâ”€â”€ app.ts              # åº”ç”¨å…¥å£
â”‚   â””â”€â”€ app.scss            # å…¨å±€æ ·å¼
â”œâ”€â”€ App_Resources/          # åŸç”Ÿèµ„æº
â”‚   â”œâ”€â”€ Android/            # Android èµ„æº
â”‚   â””â”€â”€ iOS/                # iOS èµ„æº
â”œâ”€â”€ nativescript.config.ts  # NativeScript é…ç½®
â”œâ”€â”€ package.json            # ä¾èµ–é…ç½®
â””â”€â”€ tsconfig.json           # TypeScript é…ç½®
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js 16+
- NativeScript CLI
- Android Studioï¼ˆAndroid å¼€å‘ï¼‰
- Xcodeï¼ˆiOS å¼€å‘ï¼‰

### å®‰è£…ä¾èµ–

```bash
cd mobile
npm install
```

### è¿è¡Œé¡¹ç›®

#### Android

```bash
# è¿è¡Œåˆ°æ¨¡æ‹Ÿå™¨
ns run android

# è¿è¡Œåˆ°çœŸæœº
ns run android --device <device-id>
```

#### iOS

```bash
# è¿è¡Œåˆ°æ¨¡æ‹Ÿå™¨
ns run ios

# è¿è¡Œåˆ°çœŸæœº
ns run ios --device <device-id>
```

### æ„å»ºå‘å¸ƒ

```bash
# Android APK
ns build android --release --key-store-path <path> --key-store-password <password>

# iOS IPA
ns build ios --release --for-device
```

## ğŸ”§ é…ç½®è¯´æ˜

### API åœ°å€é…ç½®

åœ¨ `app/services/apiService.ts` ä¸­é…ç½®ï¼š

```typescript
const getBaseURL = (): string => {
  const isDev = true; // å¼€å‘ç¯å¢ƒ
  
  if (isDev) {
    return isAndroid
      ? 'http://10.0.2.2:8000/api/v2'  // Android æ¨¡æ‹Ÿå™¨
      : 'http://localhost:8000/api/v2'; // iOS æ¨¡æ‹Ÿå™¨
  } else {
    return 'https://your-production-api.com/api/v2'; // ç”Ÿäº§ç¯å¢ƒ
  }
};
```

### Token å­˜å‚¨

Token ä½¿ç”¨ `ApplicationSettings` å­˜å‚¨ï¼Œè‡ªåŠ¨æŒä¹…åŒ–ã€‚

## ğŸ“– é¡µé¢è¯´æ˜

### 1. ç™»å½•é¡µé¢ (LoginPage.vue)

**åŠŸèƒ½ï¼š**
- ç”¨æˆ·å/å¯†ç ç™»å½•
- è®°ä½å¯†ç ï¼ˆæœ¬åœ°å­˜å‚¨ï¼‰
- è‡ªåŠ¨å¡«å……å‡­æ®
- ç™»å½•çŠ¶æ€éªŒè¯

**UI ç‰¹ç‚¹ï¼š**
- æ¸å˜è‰²èƒŒæ™¯
- åœ†è§’è¾“å…¥æ¡†
- åŠ è½½åŠ¨ç”»
- é”™è¯¯æç¤º

### 2. å·¥ä½œå° (HomePage.vue)

**åŠŸèƒ½ï¼š**
- ç”¨æˆ·ä¿¡æ¯å±•ç¤º
- å¿«æ·èœå•å¯¼èˆª
- ç³»ç»Ÿä¿¡æ¯
- é€€å‡ºç™»å½•

**èœå•é¡¹ï¼š**
- è®¾å¤‡åˆ—è¡¨
- å‘Šè­¦åˆ—è¡¨
- ç»´ä¿®è®°å½•
- æ‰«ç å½•å…¥

### 3. è®¾å¤‡åˆ—è¡¨ (DeviceListPage.vue)

**åŠŸèƒ½ï¼š**
- è®¾å¤‡åˆ—è¡¨å±•ç¤º
- å®æ—¶æœç´¢
- çŠ¶æ€æ ‡è¯†
- ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…

**æ˜¾ç¤ºä¿¡æ¯ï¼š**
- è®¾å¤‡åç§°/ç¼–å·
- è®¾å¤‡ç±»å‹
- å®‰è£…ä½ç½®
- è¿è¡ŒçŠ¶æ€
- ç»´æŠ¤æ—¶é—´

### 4. è®¾å¤‡è¯¦æƒ… (DeviceDetailPage.vue)

**åŠŸèƒ½ï¼š**
- å®Œæ•´è®¾å¤‡ä¿¡æ¯
- è¿è¡ŒçŠ¶æ€
- ç»´æŠ¤ä¿¡æ¯
- æ“ä½œæŒ‰é’®

**ä¿¡æ¯æ¨¡å—ï¼š**
- åŸºæœ¬ä¿¡æ¯
- è¿è¡ŒçŠ¶æ€
- ç»´æŠ¤ä¿¡æ¯
- å…¶ä»–ä¿¡æ¯

### 5. å‘Šè­¦åˆ—è¡¨ (AlarmListPage.vue)

**åŠŸèƒ½ï¼š**
- å‘Šè­¦åˆ—è¡¨
- çº§åˆ«è¿‡æ»¤
- çŠ¶æ€æ˜¾ç¤º
- è¯¦æƒ…æŸ¥çœ‹

**è¿‡æ»¤é€‰é¡¹ï¼š**
- å…¨éƒ¨
- ç´§æ€¥
- ä¸€èˆ¬

### 6. ç»´ä¿®è®°å½• (RepairListPage.vue)

**åŠŸèƒ½ï¼š**
- ç»´ä¿®è®°å½•åˆ—è¡¨
- çŠ¶æ€è¿‡æ»¤
- è¿›åº¦æ˜¾ç¤º
- è¯¦æƒ…æŸ¥çœ‹

**çŠ¶æ€ç±»å‹ï¼š**
- å¾…å¤„ç†
- è¿›è¡Œä¸­
- å·²å®Œæˆ

## ğŸ¨ UI è®¾è®¡

### è®¾è®¡è§„èŒƒ

- **ä¸»è‰²è°ƒï¼š** #4A90E2
- **è¾…åŠ©è‰²ï¼š** #357ABD
- **æˆåŠŸè‰²ï¼š** #4CAF50
- **è­¦å‘Šè‰²ï¼š** #FF9800
- **é”™è¯¯è‰²ï¼š** #F44336

### ç»„ä»¶æ ·å¼

- åœ†è§’ï¼š8px
- é—´è·ï¼š10/15/20px
- å­—ä½“å¤§å°ï¼š12-24px
- é˜´å½±ï¼šé€‚åº¦ä½¿ç”¨

## ğŸ“¡ API é›†æˆ

ä½¿ç”¨ Shared å±‚çš„ API å®¢æˆ·ç«¯ï¼Œç»Ÿä¸€æ¥å£è°ƒç”¨ï¼š

```typescript
import { api } from '../services/apiService';

// è·å–è®¾å¤‡åˆ—è¡¨
const devices = await api.devices.getList({ page: 1, page_size: 100 });

// è·å–å‘Šè­¦åˆ—è¡¨
const alarms = await api.alarms.getList({ page: 1, page_size: 100 });

// è·å–ç»´ä¿®è®°å½•
const repairs = await api.maintenance.getList({ page: 1, page_size: 100 });
```

## ğŸ” å®‰å…¨æ€§

1. **Token ç®¡ç†**
   - è‡ªåŠ¨é™„åŠ åˆ°è¯·æ±‚å¤´
   - æœ¬åœ°å®‰å…¨å­˜å‚¨
   - è¿‡æœŸè‡ªåŠ¨è·³è½¬

2. **æ•°æ®éªŒè¯**
   - è¾“å…¥éªŒè¯
   - é”™è¯¯å¤„ç†
   - å¼‚å¸¸æ•è·

3. **æƒé™æ§åˆ¶**
   - ç™»å½•çŠ¶æ€æ£€æŸ¥
   - è§’è‰²æƒé™éªŒè¯

## ğŸ“± æ‰«ç åŠŸèƒ½

è¯¦è§ `ç§»åŠ¨ç«¯åŠŸèƒ½è¯´æ˜.md` ä¸­çš„æ‰«ç åŠŸèƒ½å®ç°æŒ‡å—ã€‚

éœ€è¦å®‰è£…æ’ä»¶ï¼š
```bash
npm install @nativescript-community/ui-barcodeview --save
```

## ğŸ› è°ƒè¯•æŠ€å·§

### æŸ¥çœ‹æ—¥å¿—

```bash
# Android
adb logcat

# iOS
ns run ios --log trace
```

### Chrome DevTools

```bash
ns debug android --chrome
ns debug ios --chrome
```

## ğŸš§ å·²çŸ¥é—®é¢˜

1. **Android æ¨¡æ‹Ÿå™¨ç½‘ç»œ**
   - ä½¿ç”¨ `10.0.2.2` è®¿é—®å®¿ä¸»æœº
   - éœ€è¦åç«¯å…è®¸è¯¥ IP

2. **iOS æƒé™**
   - é¦–æ¬¡è¿è¡Œéœ€è¦æˆæƒ
   - ç›¸æœº/ä½ç½®ç­‰éœ€è¦é…ç½® Info.plist

## ğŸ“ å¼€å‘å»ºè®®

1. **ä»£ç è§„èŒƒ**
   - ä½¿ç”¨ TypeScript
   - éµå¾ª Vue 3 Composition API
   - ç»„ä»¶åŒ–å¼€å‘

2. **æ€§èƒ½ä¼˜åŒ–**
   - åˆ—è¡¨è™šæ‹ŸåŒ–
   - å›¾ç‰‡æ‡’åŠ è½½
   - çŠ¶æ€ç¼“å­˜

3. **ç”¨æˆ·ä½“éªŒ**
   - åŠ è½½çŠ¶æ€
   - é”™è¯¯æç¤º
   - ç©ºæ•°æ®å¤„ç†

## ğŸ“š å‚è€ƒæ–‡æ¡£

- [NativeScript å®˜æ–¹æ–‡æ¡£](https://docs.nativescript.org/)
- [NativeScript-Vue æ–‡æ¡£](https://nativescript-vue.org/)
- [Vue 3 æ–‡æ¡£](https://vuejs.org/)
- [Pinia æ–‡æ¡£](https://pinia.vuejs.org/)

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ è®¸å¯è¯

MIT License

