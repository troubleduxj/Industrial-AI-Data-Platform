# ===========================================
# Industrial AI Data Platform V2 环境变量配置
# ===========================================
# 复制此文件为 .env 并根据实际情况修改配置

# ===========================================
# 应用基础配置
# ===========================================
APP_NAME=IndustrialAIPlatform
APP_VERSION=2.0.0
APP_ENV=production
DEBUG=false

# ===========================================
# 服务器配置
# ===========================================
HOST=0.0.0.0
PORT=8000
WORKERS=4
BACKEND_PORT=8000
FRONTEND_PORT=80

# ===========================================
# PostgreSQL 主数据库配置
# ===========================================
DB_HOST=postgres
DB_PORT=5432
DB_NAME=industrial_ai_platform
DB_USER=postgres
DB_PASSWORD=your-secure-password-here
DATABASE_URL=postgresql://${DB_USER}:${DB_PASSWORD}@${DB_HOST}:${DB_PORT}/${DB_NAME}
POSTGRES_PORT=5432

# ===========================================
# TDengine 时序数据库配置
# ===========================================
TDENGINE_HOST=tdengine
TDENGINE_PORT=6041
TDENGINE_DB=devicemonitor
TDENGINE_USER=root
TDENGINE_PASSWORD=taosdata
TDENGINE_URL=taos://${TDENGINE_USER}:${TDENGINE_PASSWORD}@${TDENGINE_HOST}:${TDENGINE_PORT}/${TDENGINE_DB}

# ===========================================
# Redis 缓存配置
# ===========================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_URL=redis://${REDIS_HOST}:${REDIS_PORT}/${REDIS_DB}

# ===========================================
# MinIO 对象存储配置 (V2新增)
# ===========================================
MINIO_ENDPOINT=minio:9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=your-minio-secret-key-here
MINIO_BUCKET=ai-models
MINIO_SECURE=false
MINIO_API_PORT=9000
MINIO_CONSOLE_PORT=9001

# ===========================================
# 模型存储配置 (V2新增)
# ===========================================
# 存储后端: minio 或 local
MODEL_STORAGE_BACKEND=minio
# 本地存储路径 (当使用local后端时)
MODEL_STORAGE_LOCAL_PATH=/app/data/ai_models

# ===========================================
# JWT 认证配置
# ===========================================
JWT_SECRET_KEY=your-super-secret-jwt-key-change-this-in-production
JWT_ALGORITHM=HS256
JWT_EXPIRE_MINUTES=1440

# ===========================================
# WebSocket 实时推送配置 (V2新增)
# ===========================================
WEBSOCKET_ENABLED=true
WEBSOCKET_HEARTBEAT_INTERVAL=30
WEBSOCKET_MAX_CONNECTIONS=1000
WEBSOCKET_MESSAGE_QUEUE_SIZE=100

# ===========================================
# 决策引擎配置 (V2新增)
# ===========================================
DECISION_ENGINE_ENABLED=true
DECISION_ENGINE_EVAL_INTERVAL=5
DECISION_ENGINE_MAX_RULES=1000
DECISION_ENGINE_DEFAULT_COOLDOWN=300

# ===========================================
# 双写模式配置 (V2新增)
# ===========================================
ENABLE_DUAL_WRITE=true
USE_NEW_ARCHITECTURE=false
DUAL_WRITE_ERROR_THRESHOLD=100
DUAL_WRITE_CONSISTENCY_CHECK_INTERVAL=3600

# ===========================================
# 数据采集层配置 (V2新增)
# ===========================================
INGESTION_ENABLED=true
INGESTION_RETRY_MAX_ATTEMPTS=3
INGESTION_RETRY_DELAY_SECONDS=5
INGESTION_BATCH_SIZE=100

# ===========================================
# 特征存储配置 (V2新增)
# ===========================================
FEATURE_STORE_ENABLED=true
FEATURE_STORE_RETENTION_DAYS=90
FEATURE_LINEAGE_ENABLED=true

# ===========================================
# 企业身份集成配置 (V2新增)
# ===========================================
# LDAP配置
LDAP_ENABLED=false
LDAP_SERVER=ldap://your-ldap-server:389
LDAP_BASE_DN=dc=example,dc=com
LDAP_BIND_DN=cn=admin,dc=example,dc=com
LDAP_BIND_PASSWORD=
LDAP_USER_SEARCH_BASE=ou=users
LDAP_USER_SEARCH_FILTER=(uid={username})
LDAP_GROUP_SEARCH_BASE=ou=groups
LDAP_GROUP_SEARCH_FILTER=(member={user_dn})

# OAuth2配置
OAUTH2_ENABLED=false
OAUTH2_CLIENT_ID=
OAUTH2_CLIENT_SECRET=
OAUTH2_AUTHORIZE_URL=
OAUTH2_TOKEN_URL=
OAUTH2_USERINFO_URL=
OAUTH2_REDIRECT_URI=http://localhost:8000/api/v3/identity/oauth2/callback
OAUTH2_SCOPES=openid,profile,email

# ===========================================
# 安全配置
# ===========================================
SECRET_KEY=your-super-secret-key-change-this-in-production
ALLOWED_HOSTS=localhost,127.0.0.1
CORS_ORIGINS=http://localhost:3000,http://localhost:80

# ===========================================
# 日志配置
# ===========================================
LOG_LEVEL=INFO
LOG_FILE=logs/app.log
LOG_MAX_SIZE=10MB
LOG_BACKUP_COUNT=5

# ===========================================
# 监控配置
# ===========================================
MONITORING_ENABLED=true
METRICS_PORT=9090
HEALTH_CHECK_ENDPOINT=/health
ALERT_EMAIL=admin@example.com
ALERT_WEBHOOK=

# ===========================================
# Celery 异步任务配置
# ===========================================
CELERY_BROKER_URL=redis://${REDIS_HOST}:${REDIS_PORT}/1
CELERY_RESULT_BACKEND=redis://${REDIS_HOST}:${REDIS_PORT}/2
CELERY_TASK_SERIALIZER=json
CELERY_RESULT_SERIALIZER=json
CELERY_ACCEPT_CONTENT=json
CELERY_TIMEZONE=Asia/Shanghai

# ===========================================
# 前端配置
# ===========================================
VITE_API_BASE_URL=http://localhost:8000
VITE_WS_URL=ws://localhost:8000/ws

# ===========================================
# 邮件通知配置 (可选)
# ===========================================
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
SMTP_TLS=true
SMTP_SSL=false
SMTP_FROM_EMAIL=noreply@example.com

# ===========================================
# 短信通知配置 (可选)
# ===========================================
SMS_PROVIDER=
SMS_API_KEY=
SMS_API_SECRET=
